---

- name: Adding LDAP files Centos
  copy: src=../files/ldap.conf dest=/etc/openldap/ldap.conf owner=root group=root mode=0644
  copy: src=../files/system-auth dest=/etc/pam.d/system-auth-ac owner=root group=root mode=0644
  copy: src=../files/system-auth dest=/etc/pam.d/system-auth owner=root group=root mode=0644
  copy: src=../files/nscd.conf dest=/etc/openldap/etc/nscd.conf owner=root group=root mode=0644
  copy: src=../files/nsswitch.conf dest=/etc/nsswitch.conf owner=root group=root mode=0644
  copy: src=../files/nslcd.conf dest=/etc/nslcd.conf owner=root group=root mode=0644
  when: ansible_os_family == "RedHat"
  notify: start ldap-centos

- name: Adding LDAP files Debian
  copy: src=../files/ldap.conf dest=/etc/openldap/ldap.conf owner=root group=root mode=0644
  copy: src=../files/sssd.conf dest=/etc/sssd/sssd.conf owner=root group=root mode=0644
  copy: src=../files/nsswitch.conf dest=/etc/nsswitch.conf owner=root group=root mode=0644
  copy: src=../files/nslcd.conf dest=/etc/nslcd.conf owner=root group=root mode=0644
  copy: src=../files/ldap.conf dest=/etc/ldap/ldap.conf owner=root group=root mode=0644
  copy: src=../files/common-session dest=/etc/pam.d/common-session owner=root group=root mode=0644
  when: ansible_os_family == "Debian"
  notify: start ldap-debian
